<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.56">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>解析子节点 | Alan</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="preload" href="/vue-press/assets/style.72544fc1.css" as="style" /><link rel="stylesheet" href="/vue-press/assets/style.72544fc1.css" />
    <link rel="modulepreload" href="/vue-press/assets/app.7f0f8002.js"><link rel="modulepreload" href="/vue-press/assets/framework.fef63301.js"><link rel="modulepreload" href="/vue-press/assets/index.html.7f3d43d2.js"><link rel="modulepreload" href="/vue-press/assets/index.html.f2a1f50a.js"><link rel="prefetch" href="/vue-press/assets/index.html.a38ef595.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.04029c7d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/template.html.842fdff5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1e169b49.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bddabaca.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0cb2ec03.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.08a76830.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.212f9c20.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a04f8b40.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.61a9d99f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bac96ceb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a951e51d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.20b50678.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0384067e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5206a3ca.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a2d582d7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b440e6e7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3d7ab9a0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.78717a08.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bdb6bd91.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.342966eb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4f9ed65e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8fe64ac2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.34500607.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a6290b7e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ffe2b699.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.936025cd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.be232207.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c36cb923.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.04c4a8eb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9e90fb59.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4a194b1a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.107de5c9.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bf28c81c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5be720df.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d305a1e8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1510f903.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0b69024f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7b2b29ce.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1755dd90.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.228214ad.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5ce364d8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.90e4c09e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.59cc872e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e1af3dad.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bccb392e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c7dadec2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.84583dae.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7399ac4b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e12657ef.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2f0e5045.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.23e840b7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c181693e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.648f486c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.dc221dc0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b31d7496.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e2ac692e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9eaaf4c6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.62c4ec12.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9b9cf5bc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bcf6b01a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.59e8b145.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6e9bb255.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.daaa8bab.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4eda3a3a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8d78b45a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1379efe8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.58049bde.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cd98fabf.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2498ea06.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5d74e3b8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d6fdd8d1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4737624b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.41261e5a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.74c11995.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1277f305.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5422c71c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c2ee54e2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4108bd75.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.abcee0f1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.80bc8ab2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.48e819b4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7d2dfb56.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.28eb6faf.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.529113e2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.23d92b24.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a5d40903.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c752ebfb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c657be8f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c688d88a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d2390ebb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.96b801fb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fa60b780.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4eb18425.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.730657ba.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.09bcce44.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.33f14fd6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.31ca49b7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4e325696.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.58c53ae4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.12d76eb9.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.946c8a03.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5469dd8b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cf50624d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.65b48f63.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.132d4e8e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c2e8f1f7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9b7590aa.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e4abcd52.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8fe57660.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.860c372f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d3af543a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fa45a52c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8d433565.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.aaa87919.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6ad16644.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.299af82a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.31571fb7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.25ccfc6f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3d7a400d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.76cfcf34.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.451397e7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6a177da7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.65efc1c4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b6168bd0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.230b29b1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e648fee1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b8ff93eb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b7946295.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6ea50a88.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.eb0120c3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2883312c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.daa43fea.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cbf19b50.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6345cb45.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3b87e0b1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ca655243.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.28d114a8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7bf47cc8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b2795d0e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0c92e63d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e7762623.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.57068b32.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.88056345.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b7ff061a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3b69ce43.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c5d32a16.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4beea750.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5d1b8f9d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e49017bc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9fa925a4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d8a69231.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0bd15046.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.978d2681.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3405968f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.eb4b8622.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b8372f38.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.dcfef6c6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.04b172d7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cda0097a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8230c7bc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.81061d6f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bded0151.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6d8fd7c4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bba0a2c1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c9731c31.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.308b5af0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cb7e2f1b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0592d309.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bfa8ad1e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.32081adf.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.38fb9cc4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.aa14c73f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.253892bb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.296b4915.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0416f302.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.52ffa9a7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.39710cac.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d603e8fd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f9d2bfc0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8f8ae245.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.73f80d61.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8572d307.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.94442220.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7c3a512d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2232481c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3d18e441.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f935c709.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bf1e7dcd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7037b5ca.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b9dc2af6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3fd1fdf2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c979e270.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2c7f3277.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.68dff44a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ffe53eb1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f5694d6c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5b378c32.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f6035d7e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.82a08fcc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fe66daa6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.491685d8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.90ee9b8f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c7b372c4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.77c84966.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.92ec0341.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1945f0a6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fa14e805.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1d7d4b98.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2cc782fd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ae1d415f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6b82b862.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9cee7e7e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0174b50d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.edc469b8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f51c4cd1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4bbcb858.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3bedcf23.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2d806d69.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.01291559.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6f074bb7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8010eeed.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.35ac4ef1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7f4c7047.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f5783e98.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ccf5de3b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.55cba05b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2ae71aeb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2a5cb7cd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.547b7d56.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c26870f7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1ec0c7f0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.da5f4322.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8725d898.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f490b4ed.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d2b8ac7b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1e25ff5b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/404.html.c3e557d0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b1530f40.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ddc02845.js" as="script" /><link rel="prefetch" href="/vue-press/assets/template.html.f93a66cf.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cbf63d78.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9da25eb7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7607e9e8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7f5d8a32.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f10bc5eb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.167f255e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b34aaf21.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.02666ddb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cc7ec5ba.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e11679e7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bc3f43ab.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.16227427.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b43a17ff.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ff0e9634.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f71274e3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.dec1f1ce.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.77fc02ee.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ab3fe641.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.24ea4f29.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5c2b9a68.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e77e8539.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.be7c80b3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.23bdd8cc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.27da1b33.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.445e5411.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8034e800.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7e02fe59.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.20812baf.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f2c6bfeb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0e01746a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.019c01e5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.82b0a06e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.074d081b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e3f42a11.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.23b0e000.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f9f96e16.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0a0b407b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.53d76266.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8ccf9114.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.28c443b6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.34fe657c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.556bef62.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4a691ed5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.93e77cf6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.dc416ae1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7fb18127.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8b2fd453.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.42f6ed25.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0521ecf8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.06606ed8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.332c6e76.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9d859342.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.39198706.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.811f0215.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8cb3cc6f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d77a95ef.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ae8be969.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.25e18ecd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d3424b16.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f36325fd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.aad8dec7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.caf7ea15.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.202281a6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0e165915.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.39afcfc5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.00dd8f39.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4c068eca.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ef4c1af1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.13ab275a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.168511a3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a6e39ee3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.77e1a0ce.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9181be39.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5043c9f5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.15d04cff.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a4ce510e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7eccd314.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5890cf48.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.262a4b24.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2460c3fd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c4fde36e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a1952474.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.35cd3092.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8d6a5714.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2563c7e2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d09020e4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3d20f099.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9e6c9a3d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f9f78d47.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ba0c0a0a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8386d31d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4dc2cc97.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2ec190c7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0c19d1bf.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b8dcb175.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e904fd8a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c0b519ae.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.90ad6037.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.31bc8f7c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1d935911.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3157e0e8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9b099911.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f6265dfc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1e388170.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cda8e0f8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f3e305f9.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5a488ee9.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a0c91dee.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.62c1e40d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.716732ce.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b77d9f4f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0e8cfebd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.441a498f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5a0e7b6f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ab4e3b02.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e1a3d9c3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ebff86dc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1a65adc2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f8c253ee.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4b0b12d2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.07f4a6f4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d52a1805.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.62aaede0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ed1eb6fb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.91407b6a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e4647ca0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2eb5b78d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b65ca84d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.331130dc.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d8acf661.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0c53fb00.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1164455b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8be0e3a8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.af20bd94.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4ed56f60.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.18120f4c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3766d214.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.010503a4.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0d82ff40.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e777522d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7715ebe7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.90da6a80.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b53753bd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7c7709a8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.249c0fde.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.4702813f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9358f6c6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5e856864.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b06e2036.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.02fd4fb3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7ea83dec.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a0e7fb97.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.61debb80.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5ea8f5df.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.107c277b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.75d3b2a2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.69c74b0e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6fb4098f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.75f68a0d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.60cbcfe3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.571cd596.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8d5fcb9e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1ed96ed7.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0420f3fd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d8d36bf8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e5a36c31.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.513a069a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f145f288.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.89e26a63.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a7750ab1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.36e5b215.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.9bc8aee2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.80be3fc8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.69512486.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.43cc4343.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.eeea0f1f.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.96e921fb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.51075193.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2c0aed3a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1d36d3fe.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0750362b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.047ff405.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0d804610.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.617b0d32.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f88d1d0e.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3461c085.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ebe2d0ac.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f6c0f634.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.19fcbf00.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6557516c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.8872d22b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6ee623eb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fa1787ba.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2e6c4f09.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.a3ba16e3.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.b3c4b3c5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.91754c41.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.14b751ce.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.56ea56dd.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f0911428.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d91ff3e2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.bbe31d95.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.6c25a5d0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.553b1a15.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e998bc8d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fddcd922.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c7f24d11.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f0feaa7d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.888c0ed8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d53bf8fb.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5ed2d778.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.1548b933.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d3eea5f5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.238dacee.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e3c796e0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.2d2f84a8.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.00587531.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.e00ec67c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0c9223f5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.3ab7a4e2.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.24666f76.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.5d199815.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.d9854e4c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.cb79d23a.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.fba5ecb1.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.15a5232c.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.98a7913b.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.7666901d.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.0d03e4da.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ff3cfdf5.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.f5a36317.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.ede519c0.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.c892c452.js" as="script" /><link rel="prefetch" href="/vue-press/assets/index.html.61fed002.js" as="script" /><link rel="prefetch" href="/vue-press/assets/404.html.6c86e2a6.js" as="script" /><link rel="prefetch" href="/vue-press/assets/clientConfigs.d928df69.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vue-press/" class=""><!----><span class="site-name">Alan</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vue-press/interview-questions/westore/principle/" class="" aria-label="面试题"><!--[--><!--]--> 面试题 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/source/react/render/" class="router-link-active" aria-label="源码"><!--[--><!--]--> 源码 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/utils/utils/business-utils/" class="" aria-label="utils"><!--[--><!--]--> utils <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/basic-quality/http/http-https/" class="" aria-label="工程师基本素养"><!--[--><!--]--> 工程师基本素养 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/data-structures-algorithms/introduction/" class="" aria-label="算法&amp;数据结构"><!--[--><!--]--> 算法&amp;数据结构 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/engineering/npm/private/" class="" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/tool/compressed-image/" class="" aria-label="工作工具"><!--[--><!--]--> 工作工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/my-vite-component/introduce/" class="" aria-label="vite-component-doc"><!--[--><!--]--> vite-component-doc <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/CHANGELOG/" class="" aria-label="CHANGELOG"><!--[--><!--]--> CHANGELOG <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vue-press/interview-questions/westore/principle/" class="" aria-label="面试题"><!--[--><!--]--> 面试题 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/source/react/render/" class="router-link-active" aria-label="源码"><!--[--><!--]--> 源码 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/utils/utils/business-utils/" class="" aria-label="utils"><!--[--><!--]--> utils <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/basic-quality/http/http-https/" class="" aria-label="工程师基本素养"><!--[--><!--]--> 工程师基本素养 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/data-structures-algorithms/introduction/" class="" aria-label="算法&amp;数据结构"><!--[--><!--]--> 算法&amp;数据结构 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/engineering/npm/private/" class="" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/tool/compressed-image/" class="" aria-label="工作工具"><!--[--><!--]--> 工作工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/my-vite-component/introduce/" class="" aria-label="vite-component-doc"><!--[--><!--]--> vite-component-doc <!--[--><!--]--></a></div><div class="navbar-item"><a href="/vue-press/CHANGELOG/" class="" aria-label="CHANGELOG"><!--[--><!--]--> CHANGELOG <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">React <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/react/render/" class="sidebar-item" aria-label="渲染控制"><!--[--><!--]--> 渲染控制 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/react/event-mechanism/" class="sidebar-item" aria-label="事件机制"><!--[--><!--]--> 事件机制 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/react/coordination-scheduling/" class="sidebar-item" aria-label="协调与调度 "><!--[--><!--]--> 协调与调度  <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/react/hooks/" class="sidebar-item" aria-label="Hooks原理"><!--[--><!--]--> Hooks原理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Vue <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/vue-design/" class="sidebar-item" aria-label="Vue/整体设计"><!--[--><!--]--> Vue/整体设计 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">Vue/组件 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/component/vue-component-create/" class="sidebar-item" aria-label="组件的渲染流程"><!--[--><!--]--> 组件的渲染流程 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/component/vue-component-update/" class="sidebar-item" aria-label="组件的更新流程"><!--[--><!--]--> 组件的更新流程 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/component/vue-component-instance/" class="sidebar-item" aria-label="组件的实例"><!--[--><!--]--> 组件的实例 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/component/vue-component-props/" class="sidebar-item" aria-label="组件的 props"><!--[--><!--]--> 组件的 props <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/component/vue-component-life-cycle/" class="sidebar-item" aria-label="组件的生命周期"><!--[--><!--]--> 组件的生命周期 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/component/vue-component-async/" class="sidebar-item" aria-label="异步组件"><!--[--><!--]--> 异步组件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Vue/响应式原理 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/reactive-principle/reactive/" class="sidebar-item" aria-label="reactive API"><!--[--><!--]--> reactive API <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/dep-collection/" class="sidebar-item" aria-label="依赖收集"><!--[--><!--]--> 依赖收集 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/notification/" class="sidebar-item" aria-label="派发通知"><!--[--><!--]--> 派发通知 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/implementation-optimized/" class="sidebar-item" aria-label="响应式实现的优化 Vue3.2 版本"><!--[--><!--]--> 响应式实现的优化 Vue3.2 版本 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/ref/" class="sidebar-item" aria-label="ref"><!--[--><!--]--> ref <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/shallowReactive/" class="sidebar-item" aria-label="shallowReactive"><!--[--><!--]--> shallowReactive <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/readonly/" class="sidebar-item" aria-label="readonly"><!--[--><!--]--> readonly <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/reactive-principle/conclusion/" class="sidebar-item" aria-label="响应式原理总结"><!--[--><!--]--> 响应式原理总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">计算属性 computed <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/computed/computed/" class="sidebar-item" aria-label="computed API"><!--[--><!--]--> computed API <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/computed/operation-mechanism/" class="sidebar-item" aria-label="计算属性的运行机制"><!--[--><!--]--> 计算属性的运行机制 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/computed/conclusion/" class="sidebar-item" aria-label="计算属性 computed总结"><!--[--><!--]--> 计算属性 computed总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">监听器 wacher <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/watch/realize-principle/" class="sidebar-item" aria-label="watch API 的实现原理"><!--[--><!--]--> watch API 的实现原理 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/watch/design/" class="sidebar-item" aria-label="异步队列任务的设计"><!--[--><!--]--> 异步队列任务的设计 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/watch/watchEffect/" class="sidebar-item" aria-label="watchEffect API"><!--[--><!--]--> watchEffect API <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/watch/dev-debg/" class="sidebar-item" aria-label="开发环境 侦听器调试"><!--[--><!--]--> 开发环境 侦听器调试 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/watch/conclusion/" class="sidebar-item" aria-label="监听器总结"><!--[--><!--]--> 监听器总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active">模版解析 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/parsing/create-ast/" class="sidebar-item" aria-label="生成 AST"><!--[--><!--]--> 生成 AST <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/parsing/resolving-content/" class="sidebar-item" aria-label="创建解析上下文"><!--[--><!--]--> 创建解析上下文 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="解析子节点"><!--[--><!--]--> 解析子节点 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#parsechildren" class="router-link-active router-link-exact-active sidebar-item" aria-label="parseChildren"><!--[--><!--]--> parseChildren <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#生成-ast节点数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="生成 AST节点数组"><!--[--><!--]--> 生成 AST节点数组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#注释节点的解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="注释节点的解析"><!--[--><!--]--> 注释节点的解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#插值的解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="插值的解析"><!--[--><!--]--> 插值的解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#普通文本的解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="普通文本的解析"><!--[--><!--]--> 普通文本的解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#元素节点的解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="元素节点的解析"><!--[--><!--]--> 元素节点的解析 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#解析开始标签-parsetag" class="router-link-active router-link-exact-active sidebar-item" aria-label="解析开始标签 parseTag"><!--[--><!--]--> 解析开始标签 parseTag <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#解析子节点-parsechildren" class="router-link-active router-link-exact-active sidebar-item" aria-label="解析子节点 parseChildren"><!--[--><!--]--> 解析子节点 parseChildren <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#解析结束标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="解析结束标签"><!--[--><!--]--> 解析结束标签 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/vue-press/source/vue/parsing/resolving-children/#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/vue-press/source/vue/parsing/create-root/" class="sidebar-item" aria-label="创建 AST 根节点"><!--[--><!--]--> 创建 AST 根节点 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/parsing/conclusion/" class="sidebar-item" aria-label="模版解析总结"><!--[--><!--]--> 模版解析总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">AST 转换 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/ast-transform/ast-transform/" class="sidebar-item" aria-label="AST 转换"><!--[--><!--]--> AST 转换 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/ast-transform/create-transform/" class="sidebar-item" aria-label="创建 tramsform 上下文"><!--[--><!--]--> 创建 tramsform 上下文 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/ast-transform/each-transform/" class="sidebar-item" aria-label="遍历 AST 节点"><!--[--><!--]--> 遍历 AST 节点 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/ast-transform/hoist-static/" class="sidebar-item" aria-label="静态提升"><!--[--><!--]--> 静态提升 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/ast-transform/create-root/" class="sidebar-item" aria-label="创建根节点的代码生成节点"><!--[--><!--]--> 创建根节点的代码生成节点 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/ast-transform/conclusion/" class="sidebar-item" aria-label="AST 转换总结"><!--[--><!--]--> AST 转换总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">生成代码 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue-press/source/vue/create-code/1/" class="sidebar-item" aria-label="生成代码"><!--[--><!--]--> 生成代码 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/create-code/2/" class="sidebar-item" aria-label="创建代码生成上下文"><!--[--><!--]--> 创建代码生成上下文 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/create-code/3/" class="sidebar-item" aria-label="生成预设代码"><!--[--><!--]--> 生成预设代码 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/create-code/4/" class="sidebar-item" aria-label="生成预设代码"><!--[--><!--]--> 生成预设代码 <!--[--><!--]--></a><!----></li><li><a href="/vue-press/source/vue/create-code/5/" class="sidebar-item" aria-label="生成资源声明代码"><!--[--><!--]--> 生成资源声明代码 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="解析子节点" tabindex="-1"><a class="header-anchor" href="#解析子节点" aria-hidden="true">#</a> 解析子节点</h1><h2 id="parsechildren" tabindex="-1"><a class="header-anchor" href="#parsechildren" aria-hidden="true">#</a> parseChildren</h2><ul><li>解析子节点通过 parseChildren 函数完成</li><li>目的就是 解析模版并创建 AST 节点数据</li><li>有两个主要流程 <ul><li>自顶向下分析代码 生成 AST 节点数组 nodes</li><li>空白字符的处理 提高编译效率</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseChildren</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  mode<span class="token operator">:</span> TextModes<span class="token punctuation">,</span>
  ancestors<span class="token operator">:</span> ElementNode<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> TemplateChildNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token function">last</span><span class="token punctuation">(</span>ancestors<span class="token punctuation">)</span>
  <span class="token keyword">const</span> ns <span class="token operator">=</span> parent <span class="token operator">?</span> parent<span class="token punctuation">.</span>ns <span class="token operator">:</span> Namespaces<span class="token punctuation">.</span><span class="token constant">HTML</span>
  <span class="token keyword">const</span> nodes<span class="token operator">:</span> TemplateChildNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnd</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> s <span class="token operator">=</span> context<span class="token punctuation">.</span>source
    <span class="token keyword">let</span> node<span class="token operator">:</span> TemplateChildNode <span class="token operator">|</span> TemplateChildNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">DATA</span> <span class="token operator">||</span> mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">RCDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>inVPre <span class="token operator">&amp;&amp;</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>delimiters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#39;{{&#39;</span>
        node <span class="token operator">=</span> <span class="token function">parseInterpolation</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">DATA</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;&lt;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// https://html.spec.whatwg.org/multipage/parsing.html#tag-open-state</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_BEFORE_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;!&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://html.spec.whatwg.org/multipage/parsing.html#markup-declaration-open-state</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&#39;&lt;!--&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node <span class="token operator">=</span> <span class="token function">parseComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&#39;&lt;!DOCTYPE&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Ignore DOCTYPE by a limitation.</span>
            node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&#39;&lt;![CDATA[&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ns <span class="token operator">!==</span> Namespaces<span class="token punctuation">.</span><span class="token constant">HTML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              node <span class="token operator">=</span> <span class="token function">parseCDATA</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">CDATA_IN_HTML_CONTENT</span><span class="token punctuation">)</span>
              node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">INCORRECTLY_OPENED_COMMENT</span><span class="token punctuation">)</span>
            node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://html.spec.whatwg.org/multipage/parsing.html#end-tag-open-state</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_BEFORE_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;&gt;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">MISSING_END_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">X_INVALID_END_TAG</span><span class="token punctuation">)</span>
            <span class="token function">parseTag</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> TagType<span class="token punctuation">.</span>End<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>
              context<span class="token punctuation">,</span>
              ErrorCodes<span class="token punctuation">.</span><span class="token constant">INVALID_FIRST_CHARACTER_OF_TAG_NAME</span><span class="token punctuation">,</span>
              <span class="token number">2</span>
            <span class="token punctuation">)</span>
            node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          node <span class="token operator">=</span> <span class="token function">parseElement</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span>

          <span class="token comment">// 2.x &lt;template&gt; with no directive compat</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>
            __COMPAT__ <span class="token operator">&amp;&amp;</span>
            <span class="token function">isCompatEnabled</span><span class="token punctuation">(</span>
              CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_NATIVE_TEMPLATE</span><span class="token punctuation">,</span>
              context
            <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
            node <span class="token operator">&amp;&amp;</span>
            node<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&#39;template&#39;</span> <span class="token operator">&amp;&amp;</span>
            <span class="token operator">!</span>node<span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>
              p <span class="token operator">=&gt;</span>
                p<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">DIRECTIVE</span> <span class="token operator">&amp;&amp;</span>
                <span class="token function">isSpecialTemplateDirective</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            __DEV__ <span class="token operator">&amp;&amp;</span>
              <span class="token function">warnDeprecation</span><span class="token punctuation">(</span>
                CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_NATIVE_TEMPLATE</span><span class="token punctuation">,</span>
                context<span class="token punctuation">,</span>
                node<span class="token punctuation">.</span>loc
              <span class="token punctuation">)</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">emitError</span><span class="token punctuation">(</span>
            context<span class="token punctuation">,</span>
            ErrorCodes<span class="token punctuation">.</span><span class="token constant">UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME</span><span class="token punctuation">,</span>
            <span class="token number">1</span>
          <span class="token punctuation">)</span>
          node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">INVALID_FIRST_CHARACTER_OF_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node <span class="token operator">=</span> <span class="token function">parseText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pushNode</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> node<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">pushNode</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Whitespace handling strategy like v2</span>
  <span class="token keyword">let</span> removedWhitespace <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">!==</span> TextModes<span class="token punctuation">.</span><span class="token constant">RAWTEXT</span> <span class="token operator">&amp;&amp;</span> mode <span class="token operator">!==</span> TextModes<span class="token punctuation">.</span><span class="token constant">RCDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> shouldCondense <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>whitespace <span class="token operator">!==</span> <span class="token string">&#39;preserve&#39;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> node <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>inPre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\t\r\n\f ]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> prev <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> next <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token comment">// Remove if:</span>
            <span class="token comment">// - the whitespace is the first or last node, or:</span>
            <span class="token comment">// - (condense mode) the whitespace is adjacent to a comment, or:</span>
            <span class="token comment">// - (condense mode) the whitespace is between two elements AND contains newline</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
              <span class="token operator">!</span>prev <span class="token operator">||</span>
              <span class="token operator">!</span>next <span class="token operator">||</span>
              <span class="token punctuation">(</span>shouldCondense <span class="token operator">&amp;&amp;</span>
                <span class="token punctuation">(</span>prev<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span> <span class="token operator">||</span>
                  next<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span> <span class="token operator">||</span>
                  <span class="token punctuation">(</span>prev<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ELEMENT</span> <span class="token operator">&amp;&amp;</span>
                    next<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ELEMENT</span> <span class="token operator">&amp;&amp;</span>
                    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\r\n]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{</span>
              removedWhitespace <span class="token operator">=</span> <span class="token boolean">true</span>
              nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// Otherwise, the whitespace is condensed into a single space</span>
              node<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">&#39; &#39;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldCondense<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// in condense mode, consecutive whitespaces in text are condensed</span>
            <span class="token comment">// down to a single space.</span>
            node<span class="token punctuation">.</span>content <span class="token operator">=</span> node<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\t\r\n\f ]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// #6410 normalize windows newlines in &lt;pre&gt;:</span>
          <span class="token comment">// in SSR, browsers normalize server-rendered \r\n into a single \n</span>
          <span class="token comment">// in the DOM</span>
          node<span class="token punctuation">.</span>content <span class="token operator">=</span> node<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Remove comment nodes if desired by configuration.</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>comments<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        removedWhitespace <span class="token operator">=</span> <span class="token boolean">true</span>
        nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>inPre <span class="token operator">&amp;&amp;</span> parent <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">isPreTag</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// remove leading newline per html spec</span>
      <span class="token comment">// https://html.spec.whatwg.org/multipage/grouping-content.html#the-pre-element</span>
      <span class="token keyword">const</span> first <span class="token operator">=</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">&amp;&amp;</span> first<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        first<span class="token punctuation">.</span>content <span class="token operator">=</span> first<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\r?\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> removedWhitespace <span class="token operator">?</span> nodes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token operator">:</span> nodes
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="生成-ast节点数组" tabindex="-1"><a class="header-anchor" href="#生成-ast节点数组" aria-hidden="true">#</a> 生成 AST节点数组</h2><ul><li>主要分为四种情况</li><li>注释节点的解析</li><li>插值的解析</li><li>普通文本的解析</li><li>元素节点的解析</li></ul><h2 id="注释节点的解析" tabindex="-1"><a class="header-anchor" href="#注释节点的解析" aria-hidden="true">#</a> 注释节点的解析</h2><ul><li>以 &lt;!-- 开头的字符串 会进入注释节点的解析</li><li>通过 parseComment 函数解析的 <ul><li>首先会利用注释结束符的正则表达式去匹配代码 找出注释结束符</li><li>如果没有匹配到或者注释结束符不合法 都会报错</li><li>如果找到合法的注释结束符</li><li>获取她中间的注释内容 content 然后截取注释开头到结尾的代码 判断是否有嵌套注释 如果有 报错</li></ul></li><li>通过调用 advanceBy 函数 <ul><li>运行到注释结束符到后面</li><li>目的是用来前进代码的</li><li>更新 context 解析上下文</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseComment</span><span class="token punctuation">(</span>context<span class="token operator">:</span> ParserContext<span class="token punctuation">)</span><span class="token operator">:</span> CommentNode <span class="token punctuation">{</span>
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token string">&#39;&lt;!--&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">let</span> content<span class="token operator">:</span> <span class="token builtin">string</span>

  <span class="token comment">// Regular comment.</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">--(\!)?&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    content <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_IN_COMMENT</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span>index <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">ABRUPT_CLOSING_OF_EMPTY_COMMENT</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">INCORRECTLY_CLOSED_COMMENT</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    content <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> match<span class="token punctuation">.</span>index<span class="token punctuation">)</span>

    <span class="token comment">// Advancing with reporting nested comments.</span>
    <span class="token keyword">const</span> s <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> match<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
    <span class="token keyword">let</span> prevIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
      nestedIndex <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>nestedIndex <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;!--&#39;</span><span class="token punctuation">,</span> prevIndex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> nestedIndex <span class="token operator">-</span> prevIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nestedIndex <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">NESTED_COMMENT</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      prevIndex <span class="token operator">=</span> nestedIndex <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> match<span class="token punctuation">.</span>index <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> prevIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span><span class="token punctuation">,</span>
    content<span class="token punctuation">,</span>
    loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="advanceby" tabindex="-1"><a class="header-anchor" href="#advanceby" aria-hidden="true">#</a> advanceBy</h4><ul><li>主要更新上下文 context 和 source 来前进代码</li><li>同时更新 offset line column 等和代码位置相关的属性</li><li>经过 advanceBy的 处理把代码前进到注释结束符的后面 表述注释部分代码处理完毕可以继续解析</li><li>parseComment 返回值是一个描述注释节点的对象 <ul><li>type 为 3 表示是一个注释节点</li><li>context 表示注释的内容</li><li>loc 表示 注释代码的开头和结束的位置</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span> numberOfCharacters<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> source <span class="token punctuation">}</span> <span class="token operator">=</span> context
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span>numberOfCharacters <span class="token operator">&lt;=</span> source<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token function">advancePositionWithMutation</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> source<span class="token punctuation">,</span> numberOfCharacters<span class="token punctuation">)</span>
  context<span class="token punctuation">.</span>source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>numberOfCharacters<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="advanceby-作用" tabindex="-1"><a class="header-anchor" href="#advanceby-作用" aria-hidden="true">#</a> advanceBy 作用</h4><h2 id="插值的解析" tabindex="-1"><a class="header-anchor" href="#插值的解析" aria-hidden="true">#</a> 插值的解析</h2><ul><li>如果是 v-pre 会跳过插值的解析</li><li>通过 parseInterpolation 函数解析的</li><li>首先尝试查找取插值的结束隔离符 找不到则报错 <ul><li>如果找到把代码前进到取插值开始分隔符后</li><li>通过 parseTextData 获取插值中间的内容并将代码前进到插值内容后</li><li>除了普通字符串 parseTextData 内部会处理一些 HTML实体符号</li><li>由于插值内容可能会有前后空白字符 最终返回到 content 需要执行一下 trim 函数</li></ul></li><li>为了准确的拿到插值内容的代码位置信息 通过 innerStart 和 innerEnd 去记录插值内容的代码开头和结束为止</li><li>parseInterpolation 最终的返回值是一个描述插值节点的对象 <ul><li>type 为5 表示是一个插值节点</li><li>loc 表示代码的开头和结束位置信息</li></ul></li><li>插值内容可以是一个表达式 content 又是一个描述表达式节点的对象 <ul><li>type 为 4 表示是一个表达式节点</li><li>loc 表示代码的开头和结束位置信息</li><li>content 表示插值表达式内容</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseInterpolation</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  mode<span class="token operator">:</span> TextModes
<span class="token punctuation">)</span><span class="token operator">:</span> InterpolationNode <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>open<span class="token punctuation">,</span> close<span class="token punctuation">]</span> <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>delimiters
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">,</span> open<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> closeIndex <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>close<span class="token punctuation">,</span> open<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>closeIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">X_MISSING_INTERPOLATION_END</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> open<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">const</span> innerStart <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> innerEnd <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> rawContentLength <span class="token operator">=</span> closeIndex <span class="token operator">-</span> open<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> rawContent <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> rawContentLength<span class="token punctuation">)</span>
  <span class="token keyword">const</span> preTrimContent <span class="token operator">=</span> <span class="token function">parseTextData</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> rawContentLength<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> preTrimContent<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> startOffset <span class="token operator">=</span> preTrimContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>startOffset <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">advancePositionWithMutation</span><span class="token punctuation">(</span>innerStart<span class="token punctuation">,</span> rawContent<span class="token punctuation">,</span> startOffset<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> endOffset <span class="token operator">=</span>
    rawContentLength <span class="token operator">-</span> <span class="token punctuation">(</span>preTrimContent<span class="token punctuation">.</span>length <span class="token operator">-</span> content<span class="token punctuation">.</span>length <span class="token operator">-</span> startOffset<span class="token punctuation">)</span>
  <span class="token function">advancePositionWithMutation</span><span class="token punctuation">(</span>innerEnd<span class="token punctuation">,</span> rawContent<span class="token punctuation">,</span> endOffset<span class="token punctuation">)</span>
  <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> close<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">INTERPOLATION</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">SIMPLE_EXPRESSION</span><span class="token punctuation">,</span>
      isStatic<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// Set `isConstant` to false by default and will decide in transformExpression</span>
      constType<span class="token operator">:</span> ConstantTypes<span class="token punctuation">.</span><span class="token constant">NOT_CONSTANT</span><span class="token punctuation">,</span>
      content<span class="token punctuation">,</span>
      loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> innerStart<span class="token punctuation">,</span> innerEnd<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseTextData</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> TextModes
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rawText <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span>
  <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> length<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">RAWTEXT</span> <span class="token operator">||</span>
    mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">CDATA</span> <span class="token operator">||</span>
    <span class="token operator">!</span>rawText<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;&amp;&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> rawText
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// DATA or RCDATA containing &quot;&amp;&quot;&quot;. Entity decoding required.</span>
    <span class="token keyword">return</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">decodeEntities</span><span class="token punctuation">(</span>
      rawText<span class="token punctuation">,</span>
      mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">ATTRIBUTE_VALUE</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseInterpolation</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  mode<span class="token operator">:</span> TextModes
<span class="token punctuation">)</span><span class="token operator">:</span> InterpolationNode <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>open<span class="token punctuation">,</span> close<span class="token punctuation">]</span> <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>delimiters
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">,</span> open<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> closeIndex <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>close<span class="token punctuation">,</span> open<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>closeIndex <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">X_MISSING_INTERPOLATION_END</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> open<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">const</span> innerStart <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> innerEnd <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> rawContentLength <span class="token operator">=</span> closeIndex <span class="token operator">-</span> open<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> rawContent <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> rawContentLength<span class="token punctuation">)</span>
  <span class="token keyword">const</span> preTrimContent <span class="token operator">=</span> <span class="token function">parseTextData</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> rawContentLength<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> preTrimContent<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> startOffset <span class="token operator">=</span> preTrimContent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>startOffset <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">advancePositionWithMutation</span><span class="token punctuation">(</span>innerStart<span class="token punctuation">,</span> rawContent<span class="token punctuation">,</span> startOffset<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> endOffset <span class="token operator">=</span>
    rawContentLength <span class="token operator">-</span> <span class="token punctuation">(</span>preTrimContent<span class="token punctuation">.</span>length <span class="token operator">-</span> content<span class="token punctuation">.</span>length <span class="token operator">-</span> startOffset<span class="token punctuation">)</span>
  <span class="token function">advancePositionWithMutation</span><span class="token punctuation">(</span>innerEnd<span class="token punctuation">,</span> rawContent<span class="token punctuation">,</span> endOffset<span class="token punctuation">)</span>
  <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> close<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">INTERPOLATION</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">SIMPLE_EXPRESSION</span><span class="token punctuation">,</span>
      isStatic<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token comment">// Set `isConstant` to false by default and will decide in transformExpression</span>
      constType<span class="token operator">:</span> ConstantTypes<span class="token punctuation">.</span><span class="token constant">NOT_CONSTANT</span><span class="token punctuation">,</span>
      content<span class="token punctuation">,</span>
      loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> innerStart<span class="token punctuation">,</span> innerEnd<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>  <span class="token keyword">const</span> innerStart <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> innerEnd <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token operator">:</span> ParserContext<span class="token punctuation">)</span><span class="token operator">:</span> Position <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> column<span class="token punctuation">,</span> line<span class="token punctuation">,</span> offset <span class="token punctuation">}</span> <span class="token operator">=</span> context
  <span class="token keyword">return</span> <span class="token punctuation">{</span> column<span class="token punctuation">,</span> line<span class="token punctuation">,</span> offset <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="普通文本的解析" tabindex="-1"><a class="header-anchor" href="#普通文本的解析" aria-hidden="true">#</a> 普通文本的解析</h2><ul><li>通过 parseText 函数解析 <ul><li>会尝试从代码中截取响应的文本内容</li><li>遇到 &lt; 或者插值分隔符 <span>{{</span> 结束 找到结束位置</li></ul></li><li>执行 parseTextData 获取文本内容</li><li>parseText 最终返回的值是一个描述文本节点的对象 <ul><li>type 为2 表示是一个文本节点</li><li>content 表示文本内容</li><li>loc 表示代码的开头和结束位置信息</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseText</span><span class="token punctuation">(</span>context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span> mode<span class="token operator">:</span> TextModes<span class="token punctuation">)</span><span class="token operator">:</span> TextNode <span class="token punctuation">{</span>
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> endTokens <span class="token operator">=</span>
    mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">CDATA</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&#39;]]&gt;&#39;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>delimiters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

  <span class="token keyword">let</span> endIndex <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> endTokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> context<span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>endTokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> endIndex <span class="token operator">&gt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      endIndex <span class="token operator">=</span> index
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span>endIndex <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token function">parseTextData</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> endIndex<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">,</span>
    content<span class="token punctuation">,</span>
    loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="元素节点的解析" tabindex="-1"><a class="header-anchor" href="#元素节点的解析" aria-hidden="true">#</a> 元素节点的解析</h2><ul><li>会解析模版中的标签节点 <ul><li>当代码是 以 &lt; 开头 后门跟着字母 说明是一个标签开头 进入解析</li></ul></li><li>通过 parseElement 函数解析</li><li>主要做了三件事 <ul><li>解析开始标签</li><li>解析子节点</li><li>解析闭合标签</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">parseElement</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  ancestors<span class="token operator">:</span> ElementNode<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ElementNode <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// Start tag.</span>
  <span class="token keyword">const</span> wasInPre <span class="token operator">=</span> context<span class="token punctuation">.</span>inPre
  <span class="token keyword">const</span> wasInVPre <span class="token operator">=</span> context<span class="token punctuation">.</span>inVPre
  <span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token function">last</span><span class="token punctuation">(</span>ancestors<span class="token punctuation">)</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">parseTag</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> TagType<span class="token punctuation">.</span>Start<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
  <span class="token keyword">const</span> isPreBoundary <span class="token operator">=</span> context<span class="token punctuation">.</span>inPre <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>wasInPre
  <span class="token keyword">const</span> isVPreBoundary <span class="token operator">=</span> context<span class="token punctuation">.</span>inVPre <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>wasInVPre

  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>isSelfClosing <span class="token operator">||</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">isVoidTag</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// #4030 self-closing &lt;pre&gt; tag</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isPreBoundary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span>inPre <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isVPreBoundary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span>inVPre <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> element
  <span class="token punctuation">}</span>

  <span class="token comment">// Children.</span>
  ancestors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
  <span class="token keyword">const</span> mode <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getTextMode</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token function">parseChildren</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span>
  ancestors<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 2.x inline-template compat</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>__COMPAT__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> inlineTemplateProp <span class="token operator">=</span> element<span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
      p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ATTRIBUTE</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;inline-template&#39;</span>
    <span class="token punctuation">)</span> <span class="token keyword">as</span> AttributeNode
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      inlineTemplateProp <span class="token operator">&amp;&amp;</span>
      <span class="token function">checkCompatEnabled</span><span class="token punctuation">(</span>
        CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_INLINE_TEMPLATE</span><span class="token punctuation">,</span>
        context<span class="token punctuation">,</span>
        inlineTemplateProp<span class="token punctuation">.</span>loc
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> loc <span class="token operator">=</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> element<span class="token punctuation">.</span>loc<span class="token punctuation">.</span>end<span class="token punctuation">)</span>
      inlineTemplateProp<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> loc<span class="token punctuation">.</span>source<span class="token punctuation">,</span>
        loc
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  element<span class="token punctuation">.</span>children <span class="token operator">=</span> children

  <span class="token comment">// End tag.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWithEndTagOpen</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">,</span> element<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">parseTag</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> TagType<span class="token punctuation">.</span>End<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">X_MISSING_END_TAG</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> element<span class="token punctuation">.</span>loc<span class="token punctuation">.</span>start<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> element<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;script&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> first <span class="token operator">=</span> children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">&amp;&amp;</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span>loc<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token string">&#39;&lt;!--&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  element<span class="token punctuation">.</span>loc <span class="token operator">=</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> element<span class="token punctuation">.</span>loc<span class="token punctuation">.</span>start<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isPreBoundary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>inPre <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isVPreBoundary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>inVPre <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> element
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解析开始标签-parsetag" tabindex="-1"><a class="header-anchor" href="#解析开始标签-parsetag" aria-hidden="true">#</a> 解析开始标签 parseTag</h3><ul><li>首先匹配标签文本的结束位置 将代码前进到标签文本后门的空白字符后</li><li>然后执行 parseAttributes 解析标签的属性 class style 指令等 最终解析生成一个 prop 数组 将代码推进到属性后 <ul><li>接着检查是不是一个 pre 标签 如果是 设置 context.inPre 为 true</li><li>再去检查属性有没有 v-pre 指令 如果是 设置 context.inVPre 为 true</li><li>重置上下文 context 重置解析属性</li></ul></li><li>判断是不是一个 自闭和标签 将代码推进到闭合标签后</li><li>最后判断标签类型 插槽 模版 还是 自定义组件</li><li>最终返回到值是一个描述节点类型的对象 <ul><li>type ： 1 元素节点</li><li>tag： 标签名</li><li>tagType ：标签的类型</li><li>props: 标签的属性</li><li>isSelfClosing ： 是否是一个闭合标签</li><li>loc: 表示开头和结束的位置</li><li>children : 标签的子节点数组 初始化 空</li></ul></li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>
<span class="token doc-comment comment">/**
 * Parse a tag (E.g. `&lt;div id=a&gt;`) with that type (start tag or end tag).
 */</span>
<span class="token keyword">function</span> <span class="token function">parseTag</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  type<span class="token operator">:</span> TagType<span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
  parent<span class="token operator">:</span> ElementNode <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ElementNode
<span class="token keyword">function</span> <span class="token function">parseTag</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  type<span class="token operator">:</span> TagType<span class="token punctuation">.</span>End<span class="token punctuation">,</span>
  parent<span class="token operator">:</span> ElementNode <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token keyword">function</span> <span class="token function">parseTag</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  type<span class="token operator">:</span> TagType<span class="token punctuation">,</span>
  parent<span class="token operator">:</span> ElementNode <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">)</span><span class="token operator">:</span> ElementNode <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
  __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;\/?[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span>
  __TEST__ <span class="token operator">&amp;&amp;</span>
    <span class="token function">assert</span><span class="token punctuation">(</span>
      type <span class="token operator">===</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token string">&#39;&lt;/&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> TagType<span class="token punctuation">.</span>End <span class="token operator">:</span> TagType<span class="token punctuation">.</span>Start<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

  <span class="token comment">// Tag open.</span>
  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;\/?([a-z][^\t\r\n\f /&gt;]*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token operator">!</span>
  <span class="token keyword">const</span> tag <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> ns <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">getNamespace</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>

  <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token function">advanceSpaces</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>

  <span class="token comment">// save current state in case we need to re-parse attributes with v-pre</span>
  <span class="token keyword">const</span> cursor <span class="token operator">=</span> <span class="token function">getCursor</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token keyword">const</span> currentSource <span class="token operator">=</span> context<span class="token punctuation">.</span>source

  <span class="token comment">// check &lt;pre&gt; tag</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">isPreTag</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>inPre <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Attributes.</span>
  <span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">parseAttributes</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> type<span class="token punctuation">)</span>

  <span class="token comment">// check v-pre</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    type <span class="token operator">===</span> TagType<span class="token punctuation">.</span>Start <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span>context<span class="token punctuation">.</span>inVPre <span class="token operator">&amp;&amp;</span>
    props<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">DIRECTIVE</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;pre&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>inVPre <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token comment">// reset context</span>
    <span class="token function">extend</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> cursor<span class="token punctuation">)</span>
    context<span class="token punctuation">.</span>source <span class="token operator">=</span> currentSource
    <span class="token comment">// re-parse attrs and filter out v-pre itself</span>
    props <span class="token operator">=</span> <span class="token function">parseAttributes</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">&#39;v-pre&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Tag close.</span>
  <span class="token keyword">let</span> isSelfClosing <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_IN_TAG</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    isSelfClosing <span class="token operator">=</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">,</span> <span class="token string">&#39;/&gt;&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> TagType<span class="token punctuation">.</span>End <span class="token operator">&amp;&amp;</span> isSelfClosing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">END_TAG_WITH_TRAILING_SOLIDUS</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> isSelfClosing <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> TagType<span class="token punctuation">.</span>End<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 2.x deprecation checks</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    __COMPAT__ <span class="token operator">&amp;&amp;</span>
    __DEV__ <span class="token operator">&amp;&amp;</span>
    <span class="token function">isCompatEnabled</span><span class="token punctuation">(</span>
      CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_V_IF_V_FOR_PRECEDENCE</span><span class="token punctuation">,</span>
      context
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> hasIf <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">let</span> hasFor <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> props<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> p <span class="token operator">=</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">DIRECTIVE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;if&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          hasIf <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;for&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          hasFor <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hasIf <span class="token operator">&amp;&amp;</span> hasFor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warnDeprecation</span><span class="token punctuation">(</span>
          CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_V_IF_V_FOR_PRECEDENCE</span><span class="token punctuation">,</span>
          context<span class="token punctuation">,</span>
          <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> tagType <span class="token operator">=</span> ElementTypes<span class="token punctuation">.</span><span class="token constant">ELEMENT</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>inVPre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> <span class="token string">&#39;slot&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tagType <span class="token operator">=</span> ElementTypes<span class="token punctuation">.</span><span class="token constant">SLOT</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> <span class="token string">&#39;template&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        props<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>
          p <span class="token operator">=&gt;</span>
            p<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">DIRECTIVE</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isSpecialTemplateDirective</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tagType <span class="token operator">=</span> ElementTypes<span class="token punctuation">.</span><span class="token constant">TEMPLATE</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isComponent</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> props<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tagType <span class="token operator">=</span> ElementTypes<span class="token punctuation">.</span><span class="token constant">COMPONENT</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ELEMENT</span><span class="token punctuation">,</span>
    ns<span class="token punctuation">,</span>
    tag<span class="token punctuation">,</span>
    tagType<span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
    isSelfClosing<span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    loc<span class="token operator">:</span> <span class="token function">getSelection</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">,</span>
    codegenNode<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token comment">// to be created during transform phase</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解析子节点-parsechildren" tabindex="-1"><a class="header-anchor" href="#解析子节点-parsechildren" aria-hidden="true">#</a> 解析子节点 parseChildren</h3><ul><li>如果遇到元素节点 递归执行 parseElement</li><li>parseChildren 和 parseElement 开头 获取 ancestor 数组的最后一个值 拿到元素的标签节点</li><li>执行 parseChildren 前添加到数组的尾部元素</li><li>解析完成子节点后 把 element 从 ancestors 中弹出 把children 数组添加到 element.chilren 中</li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>
<span class="token keyword">function</span> <span class="token function">parseChildren</span><span class="token punctuation">(</span>
  context<span class="token operator">:</span> ParserContext<span class="token punctuation">,</span>
  mode<span class="token operator">:</span> TextModes<span class="token punctuation">,</span>
  ancestors<span class="token operator">:</span> ElementNode<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span> TemplateChildNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token function">last</span><span class="token punctuation">(</span>ancestors<span class="token punctuation">)</span>
  <span class="token keyword">const</span> ns <span class="token operator">=</span> parent <span class="token operator">?</span> parent<span class="token punctuation">.</span>ns <span class="token operator">:</span> Namespaces<span class="token punctuation">.</span><span class="token constant">HTML</span>
  <span class="token keyword">const</span> nodes<span class="token operator">:</span> TemplateChildNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnd</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    __TEST__ <span class="token operator">&amp;&amp;</span> <span class="token function">assert</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>source<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> s <span class="token operator">=</span> context<span class="token punctuation">.</span>source
    <span class="token keyword">let</span> node<span class="token operator">:</span> TemplateChildNode <span class="token operator">|</span> TemplateChildNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">DATA</span> <span class="token operator">||</span> mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">RCDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>inVPre <span class="token operator">&amp;&amp;</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>delimiters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#39;{{&#39;</span>
        node <span class="token operator">=</span> <span class="token function">parseInterpolation</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">===</span> TextModes<span class="token punctuation">.</span><span class="token constant">DATA</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;&lt;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// https://html.spec.whatwg.org/multipage/parsing.html#tag-open-state</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_BEFORE_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;!&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://html.spec.whatwg.org/multipage/parsing.html#markup-declaration-open-state</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&#39;&lt;!--&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node <span class="token operator">=</span> <span class="token function">parseComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&#39;&lt;!DOCTYPE&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Ignore DOCTYPE by a limitation.</span>
            node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&#39;&lt;![CDATA[&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ns <span class="token operator">!==</span> Namespaces<span class="token punctuation">.</span><span class="token constant">HTML</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              node <span class="token operator">=</span> <span class="token function">parseCDATA</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">CDATA_IN_HTML_CONTENT</span><span class="token punctuation">)</span>
              node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">INCORRECTLY_OPENED_COMMENT</span><span class="token punctuation">)</span>
            node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://html.spec.whatwg.org/multipage/parsing.html#end-tag-open-state</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">EOF_BEFORE_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;&gt;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">MISSING_END_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token function">advanceBy</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">X_INVALID_END_TAG</span><span class="token punctuation">)</span>
            <span class="token function">parseTag</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> TagType<span class="token punctuation">.</span>End<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">emitError</span><span class="token punctuation">(</span>
              context<span class="token punctuation">,</span>
              ErrorCodes<span class="token punctuation">.</span><span class="token constant">INVALID_FIRST_CHARACTER_OF_TAG_NAME</span><span class="token punctuation">,</span>
              <span class="token number">2</span>
            <span class="token punctuation">)</span>
            node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          node <span class="token operator">=</span> <span class="token function">parseElement</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span>

          <span class="token comment">// 2.x &lt;template&gt; with no directive compat</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>
            __COMPAT__ <span class="token operator">&amp;&amp;</span>
            <span class="token function">isCompatEnabled</span><span class="token punctuation">(</span>
              CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_NATIVE_TEMPLATE</span><span class="token punctuation">,</span>
              context
            <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
            node <span class="token operator">&amp;&amp;</span>
            node<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&#39;template&#39;</span> <span class="token operator">&amp;&amp;</span>
            <span class="token operator">!</span>node<span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>
              p <span class="token operator">=&gt;</span>
                p<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">DIRECTIVE</span> <span class="token operator">&amp;&amp;</span>
                <span class="token function">isSpecialTemplateDirective</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            __DEV__ <span class="token operator">&amp;&amp;</span>
              <span class="token function">warnDeprecation</span><span class="token punctuation">(</span>
                CompilerDeprecationTypes<span class="token punctuation">.</span><span class="token constant">COMPILER_NATIVE_TEMPLATE</span><span class="token punctuation">,</span>
                context<span class="token punctuation">,</span>
                node<span class="token punctuation">.</span>loc
              <span class="token punctuation">)</span>
            node <span class="token operator">=</span> node<span class="token punctuation">.</span>children
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">emitError</span><span class="token punctuation">(</span>
            context<span class="token punctuation">,</span>
            ErrorCodes<span class="token punctuation">.</span><span class="token constant">UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME</span><span class="token punctuation">,</span>
            <span class="token number">1</span>
          <span class="token punctuation">)</span>
          node <span class="token operator">=</span> <span class="token function">parseBogusComment</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">emitError</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ErrorCodes<span class="token punctuation">.</span><span class="token constant">INVALID_FIRST_CHARACTER_OF_TAG_NAME</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node <span class="token operator">=</span> <span class="token function">parseText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">pushNode</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> node<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">pushNode</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Whitespace handling strategy like v2</span>
  <span class="token keyword">let</span> removedWhitespace <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">!==</span> TextModes<span class="token punctuation">.</span><span class="token constant">RAWTEXT</span> <span class="token operator">&amp;&amp;</span> mode <span class="token operator">!==</span> TextModes<span class="token punctuation">.</span><span class="token constant">RCDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> shouldCondense <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>whitespace <span class="token operator">!==</span> <span class="token string">&#39;preserve&#39;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> node <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">.</span>inPre<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\t\r\n\f ]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> prev <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">const</span> next <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token comment">// Remove if:</span>
            <span class="token comment">// - the whitespace is the first or last node, or:</span>
            <span class="token comment">// - (condense mode) the whitespace is adjacent to a comment, or:</span>
            <span class="token comment">// - (condense mode) the whitespace is between two elements AND contains newline</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
              <span class="token operator">!</span>prev <span class="token operator">||</span>
              <span class="token operator">!</span>next <span class="token operator">||</span>
              <span class="token punctuation">(</span>shouldCondense <span class="token operator">&amp;&amp;</span>
                <span class="token punctuation">(</span>prev<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span> <span class="token operator">||</span>
                  next<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span> <span class="token operator">||</span>
                  <span class="token punctuation">(</span>prev<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ELEMENT</span> <span class="token operator">&amp;&amp;</span>
                    next<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">ELEMENT</span> <span class="token operator">&amp;&amp;</span>
                    <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\r\n]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{</span>
              removedWhitespace <span class="token operator">=</span> <span class="token boolean">true</span>
              nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// Otherwise, the whitespace is condensed into a single space</span>
              node<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">&#39; &#39;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldCondense<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// in condense mode, consecutive whitespaces in text are condensed</span>
            <span class="token comment">// down to a single space.</span>
            node<span class="token punctuation">.</span>content <span class="token operator">=</span> node<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\t\r\n\f ]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// #6410 normalize windows newlines in &lt;pre&gt;:</span>
          <span class="token comment">// in SSR, browsers normalize server-rendered \r\n into a single \n</span>
          <span class="token comment">// in the DOM</span>
          node<span class="token punctuation">.</span>content <span class="token operator">=</span> node<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Remove comment nodes if desired by configuration.</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">COMMENT</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>comments<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        removedWhitespace <span class="token operator">=</span> <span class="token boolean">true</span>
        nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>inPre <span class="token operator">&amp;&amp;</span> parent <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">isPreTag</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// remove leading newline per html spec</span>
      <span class="token comment">// https://html.spec.whatwg.org/multipage/grouping-content.html#the-pre-element</span>
      <span class="token keyword">const</span> first <span class="token operator">=</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">&amp;&amp;</span> first<span class="token punctuation">.</span>type <span class="token operator">===</span> NodeTypes<span class="token punctuation">.</span><span class="token constant">TEXT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        first<span class="token punctuation">.</span>content <span class="token operator">=</span> first<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\r?\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> removedWhitespace <span class="token operator">?</span> nodes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token operator">:</span> nodes
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="解析结束标签" tabindex="-1"><a class="header-anchor" href="#解析结束标签" aria-hidden="true">#</a> 解析结束标签</h3><ul><li>更新标签节点的代码位置</li><li>parseElement 最终返回的值就是一个元素节点的 element</li></ul><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><ul><li>通过不断递归的解析 就得到整个模版</li><li>并且标签类型的 AST 节点保持对子节点数组的引用 构成了一个树形的数据结构</li><li>整个解析过程 构造出来的 AST 节点数组能够映射整个模版的 DOM 结构</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: alan.xiao@d1m.cn">alan.xiao</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/vue-press/source/vue/parsing/resolving-content/" class="" aria-label="创建解析上下文"><!--[--><!--]--> 创建解析上下文 <!--[--><!--]--></a></span><span class="next"><a href="/vue-press/source/vue/parsing/create-root/" class="" aria-label="创建 AST 根节点"><!--[--><!--]--> 创建 AST 根节点 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vue-press/assets/app.7f0f8002.js" defer></script>
  </body>
</html>
